---
// LocationPageTemplate.astro - Reusable template for geographic landing pages

interface FAQ {
  question: string;
  answer: string;
}

interface CommonCondition {
  condition: string;
  description: string;
}

interface Props {
  neighborhood: string;
  slug: string;
  intro: string;
  directions: string;
  landmarks: string[];
  testimonial?: {
    quote: string;
    author: string;
  };
  faqs?: FAQ[];
  commonConditions?: CommonCondition[];
  neighborhoodInfo?: string;
}

const { neighborhood, slug, intro, directions, landmarks, testimonial, faqs, commonConditions, neighborhoodInfo } = Astro.props;

import BaseLayout from '../layouts/BaseLayout.astro';
import WatermarkBackground from './WatermarkBackground.astro';
import Icon from './Icon.astro';

const pageTitle = `Physical Therapy Near ${neighborhood} | Baltimore PT | Physica Medica`;
const pageDescription = `Expert physical therapy near ${neighborhood}, Baltimore. 60-minute 1-on-1 sessions with Dr. Maksim Birikov, DPT. Dry needling, manual therapy, and specialty techniques.`;

const breadcrumbs = [
  { name: "Home", url: "/" },
  { name: "Locations", url: "/locations" },
  { name: neighborhood, url: `/locations/${slug}` }
];

const locationSchema = {
  "@type": "LocalBusiness",
  "name": "Physica Medica - Physical Therapy",
  "description": `Expert physical therapy services near ${neighborhood}, Baltimore`,
  "url": `https://physicamedica.net/locations/${slug}`,
  "telephone": "443-228-8029",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "800 S Bond St",
    "addressLocality": "Baltimore",
    "addressRegion": "MD",
    "postalCode": "21231",
    "addressCountry": "US"
  },
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Wednesday", "Friday"],
      "opens": "08:00",
      "closes": "19:30"
    },
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": "Tuesday",
      "opens": "10:00",
      "closes": "19:30"
    }
  ],
  "areaServed": {
    "@type": "Neighborhood",
    "name": neighborhood,
    "containedInPlace": {
      "@type": "City",
      "name": "Baltimore",
      "containedInPlace": "Maryland"
    }
  }
};

// Generate FAQ schema if FAQs are provided
const faqSchema = faqs && faqs.length > 0 ? {
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
} : null;

// Combine schemas
const allSchemas = faqSchema ? [locationSchema, faqSchema] : locationSchema;

// Services list for display
const services = [
  { name: "Dry Needling", href: "/services/dry-needling", description: "Release muscle knots & trigger points" },
  { name: "Myofascial Cupping", href: "/services/myofascial-cupping", description: "Release fascial restrictions" },
  { name: "Deep Tissue Massage", href: "/services/deep-tissue-sports-massage", description: "Therapeutic massage for recovery" },
  { name: "IASTM", href: "/services/instrument-assisted-tissue-mobilization", description: "Break down scar tissue" },
  { name: "Pregnancy PT", href: "/services/pregnancy-physical-therapy", description: "Prenatal & postpartum care" },
  { name: "Scoliosis Treatment", href: "/services/scoliosis", description: "Specialized spinal care" },
];

const specialtyTechniques = [
  { name: "Posture Re-education", href: "/services/specialty-techniques/posture-reeducation" },
  { name: "Diaphragmatic Rehabilitation", href: "/services/specialty-techniques/diaphragmatic-rehabilitation" },
  { name: "Neural Tension Release", href: "/services/specialty-techniques/neural-tension-release" },
  { name: "Scar Tissue Mobilization", href: "/services/specialty-techniques/scar-tissue-mobilization" },
  { name: "Therapy for Singers", href: "/services/specialty-techniques/therapy-for-singers" },
];
---

<BaseLayout title={pageTitle} description={pageDescription} schema={allSchemas} breadcrumbs={breadcrumbs}>
  <WatermarkBackground variant="gray" />
  
  <!-- Hero Section -->
  <section class="location-hero">
    <div class="hero-gradient-bg"></div>
    <div class="container-narrow">
      <div class="hero-centered">
        <div class="location-badge">Serving {neighborhood}</div>
        <h1>Physical Therapy Near {neighborhood}</h1>
        <p class="hero-subtitle">Expert Care for {neighborhood} Residents</p>
        <div class="hero-value-pills">
          <span class="value-pill">60 Min Sessions</span>
          <span class="value-pill">1-on-1 with DPT</span>
          <span class="value-pill">Same Week Availability</span>
        </div>
        <a href="/schedule" class="hero-cta">Schedule Your Visit</a>
      </div>
    </div>
  </section>

  <!-- Intro Section -->
  <section class="content-section-white">
    <div class="container-narrow">
      <div class="intro-content">
        <h2>Welcome, {neighborhood} Neighbors</h2>
        <p class="lead-intro">{intro}</p>
        
        <div class="location-details">
          <div class="detail-card">
            <div class="detail-icon"><Icon name="map-pin" size={28} /></div>
            <h3>Getting Here from {neighborhood}</h3>
            <p>{directions}</p>
          </div>
          
          <div class="detail-card">
            <div class="detail-icon"><Icon name="building" size={28} /></div>
            <h3>Near Landmarks</h3>
            <ul class="landmarks-list">
              {landmarks.map(landmark => (
                <li>{landmark}</li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Choose Section -->
  <section class="content-section-accent">
    <div class="container-narrow">
      <div class="why-choose-content">
        <h2>Why {neighborhood} Residents Choose Physica Medica</h2>
        <div class="why-grid">
          <div class="why-item">
            <strong>60 Minutes of Dedicated Care</strong>
            <p>Unlike assembly-line clinics with 15-minute sessions, Dr. Maks provides a full hour of focused treatment.</p>
          </div>
          <div class="why-item">
            <strong>DPT-Level Expertise</strong>
            <p>Doctor of Physical Therapy training ensures accurate diagnosis and effective treatment.</p>
          </div>
          <div class="why-item">
            <strong>Convenient Location</strong>
            <p>Just minutes from {neighborhood} with easy parking and flexible scheduling.</p>
          </div>
          <div class="why-item">
            <strong>Boutique Experience</strong>
            <p>No waiting rooms full of patients. Personal attention from start to finish.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="content-section-gray">
    <div class="container-narrow">
      <h2 class="section-title-center">Services Available Near {neighborhood}</h2>
      <div class="services-grid">
        {services.map(service => (
          <a href={service.href} class="service-card-location">
            <h4>{service.name}</h4>
            <p>{service.description} â†’</p>
          </a>
        ))}
      </div>
      
      <div class="specialty-section">
        <h3>Specialty Techniques</h3>
        <p>Advanced techniques you won't find at typical PT clinics:</p>
        <div class="specialty-links">
          {specialtyTechniques.map(tech => (
            <a href={tech.href}>{tech.name}</a>
          ))}
        </div>
      </div>
    </div>
  </section>

  {testimonial && (
    <section class="content-section-white">
      <div class="container-narrow">
        <div class="location-testimonial">
          <div class="testimonial-quote">
            {testimonial.quote}
          </div>
          <div class="testimonial-author">
            <strong>{testimonial.author}</strong>
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- Common Conditions Section -->
  {commonConditions && commonConditions.length > 0 && (
    <section class="content-section-gray">
      <div class="container-narrow">
        <h2 class="section-title-center">Common Conditions We Treat for {neighborhood} Residents</h2>
        <p class="section-subtitle">Based on the lifestyle and activities common in {neighborhood}, we frequently help patients with:</p>
        <div class="conditions-grid">
          {commonConditions.map(item => (
            <div class="condition-card">
              <h4>{item.condition}</h4>
              <p>{item.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Extended Neighborhood Info -->
  {neighborhoodInfo && (
    <section class="content-section-white">
      <div class="container-narrow">
        <div class="neighborhood-info">
          <h2>Physical Therapy for the {neighborhood} Community</h2>
          <div class="neighborhood-text" set:html={neighborhoodInfo} />
        </div>
      </div>
    </section>
  )}

  <!-- FAQ Section -->
  {faqs && faqs.length > 0 && (
    <section class="content-section-accent">
      <div class="container-narrow">
        <h2 class="section-title-center">Frequently Asked Questions from {neighborhood} Patients</h2>
        <div class="faq-list">
          {faqs.map(faq => (
            <details class="faq-item">
              <summary class="faq-question">{faq.question}</summary>
              <div class="faq-answer">
                <p>{faq.answer}</p>
              </div>
            </details>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  <section class="content-section-cta">
    <div class="container-narrow">
      <div class="cta-content">
        <h2>Ready to Feel Better?</h2>
        <p>Schedule your appointment with Dr. Maks today. {neighborhood} residents enjoy convenient access to Baltimore's premier boutique physical therapy.</p>
        <div class="cta-buttons">
          <a href="/schedule" class="cta-button-primary">Schedule Now</a>
          <a href="/contact" class="cta-button-secondary">Contact Us</a>
        </div>
        <div class="contact-info">
          <p><strong>Physica Medica</strong></p>
          <p>800 S Bond St, Baltimore, MD 21231</p>
          <p><a href="tel:+14432288029">443-228-8029</a></p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* ========================================
     LOCATION PAGE THEME
     Soft teal/blue, rounded corners, clean design
     ======================================== */

  .location-hero {
    position: relative;
    background: linear-gradient(160deg, #4a9b8c 0%, #5fb3a1 50%, #7cb5d6 100%);
    padding: 4rem 2rem;
    overflow: hidden;
    z-index: 1;
  }

  .hero-gradient-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse at 50% 0%, rgba(255,255,255,0.2) 0%, transparent 60%);
    pointer-events: none;
  }

  .container-narrow {
    max-width: 900px;
    margin: 0 auto;
  }

  .hero-centered {
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .location-badge {
    display: inline-block;
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.3);
    padding: 0.5rem 1.25rem;
    border-radius: 20px;
    font-size: 0.9rem;
    color: white;
    margin-bottom: 1rem;
  }

  .location-hero h1 {
    color: white;
    font-size: 2.5rem;
    margin: 0 0 0.5rem;
  }

  .hero-subtitle {
    color: rgba(255,255,255,0.95);
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
  }

  .hero-value-pills {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 1.5rem;
  }

  .value-pill {
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.3);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    color: white;
    font-weight: 500;
  }

  .hero-cta {
    display: inline-block;
    background: white;
    color: var(--color-primary, #2d6d5f);
    padding: 14px 36px;
    text-decoration: none;
    font-weight: 600;
    border-radius: 25px;
    transition: all 0.2s;
    font-size: 1rem;
  }

  .hero-cta:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }

  /* Content Sections */
  .content-section-white {
    background: white;
    padding: 4rem 2rem;
    position: relative;
    z-index: 1;
  }

  .content-section-gray {
    background: #f8f9fa;
    padding: 4rem 2rem;
    position: relative;
    z-index: 1;
  }

  .content-section-accent {
    background: linear-gradient(135deg, rgba(95, 179, 161, 0.08) 0%, rgba(124, 181, 214, 0.08) 100%);
    padding: 4rem 2rem;
    position: relative;
    z-index: 1;
  }

  .content-section-cta {
    background: linear-gradient(135deg, var(--color-primary, #2d6d5f) 0%, #1a3d35 100%);
    padding: 4rem 2rem;
    position: relative;
    z-index: 1;
    color: white;
  }

  /* Intro Section */
  .intro-content h2 {
    color: var(--color-primary, #2d6d5f);
    margin-bottom: 1rem;
  }

  .lead-intro {
    font-size: 1.15rem;
    line-height: 1.7;
    color: #495057;
    margin-bottom: 2rem;
  }

  .location-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .detail-card {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 12px;
    border: 1px solid #e9ecef;
  }

  .detail-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0.75rem;
    color: var(--color-primary);
  }

  .detail-card h3 {
    color: var(--color-primary, #2d6d5f);
    margin: 0 0 0.75rem;
    font-size: 1.1rem;
  }

  .detail-card p {
    color: #6c757d;
    margin: 0;
    font-size: 0.95rem;
    line-height: 1.6;
  }

  .landmarks-list {
    margin: 0;
    padding-left: 1.25rem;
    color: #6c757d;
    font-size: 0.95rem;
  }

  .landmarks-list li {
    margin-bottom: 0.35rem;
  }

  /* Why Choose Section */
  .why-choose-content h2 {
    text-align: center;
    color: var(--color-primary, #2d6d5f);
    margin-bottom: 2rem;
  }

  .why-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
  }

  .why-item {
    background: white;
    padding: 1.25rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  }

  .why-item strong {
    display: block;
    color: var(--color-primary, #2d6d5f);
    margin-bottom: 0.5rem;
    font-size: 1rem;
  }

  .why-item p {
    margin: 0;
    color: #6c757d;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  /* Services Section */
  .section-title-center {
    text-align: center;
    color: var(--color-primary, #2d6d5f);
    margin-bottom: 2rem;
  }

  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-bottom: 2.5rem;
  }

  .service-card-location {
    background: white;
    padding: 1.25rem;
    border-radius: 10px;
    text-decoration: none;
    border: 1px solid #e9ecef;
    transition: all 0.2s;
  }

  .service-card-location:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    border-color: var(--color-accent, #3db89f);
  }

  .service-card-location h4 {
    color: var(--color-primary, #2d6d5f);
    margin: 0 0 0.35rem;
    font-size: 1rem;
  }

  .service-card-location p {
    color: var(--color-accent, #3db89f);
    margin: 0;
    font-size: 0.9rem;
    font-weight: 500;
  }

  .specialty-section {
    text-align: center;
    padding-top: 1.5rem;
    border-top: 1px solid #e9ecef;
  }

  .specialty-section h3 {
    color: var(--color-primary, #2d6d5f);
    margin-bottom: 0.5rem;
  }

  .specialty-section > p {
    color: #6c757d;
    margin-bottom: 1rem;
  }

  .specialty-links {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
  }

  .specialty-links a {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: white;
    border: 1px solid var(--color-accent, #3db89f);
    border-radius: 20px;
    text-decoration: none;
    color: var(--color-primary, #2d6d5f);
    font-size: 0.85rem;
    transition: all 0.2s;
  }

  .specialty-links a:hover {
    background: var(--color-accent, #3db89f);
    color: white;
  }

  /* Testimonial */
  .location-testimonial {
    background: linear-gradient(135deg, rgba(95, 179, 161, 0.08) 0%, rgba(124, 181, 214, 0.08) 100%);
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    border-left: 4px solid var(--color-accent, #3db89f);
  }

  .testimonial-quote {
    font-size: 1.15rem;
    font-style: italic;
    line-height: 1.7;
    color: #495057;
    margin-bottom: 1rem;
  }

  .testimonial-quote::before {
    content: '"';
    font-size: 2rem;
    color: var(--color-accent, #3db89f);
    line-height: 0;
    vertical-align: -0.4em;
    margin-right: 0.25rem;
  }

  .testimonial-author {
    color: var(--color-primary, #2d6d5f);
    font-size: 0.95rem;
  }

  /* CTA Section */
  .cta-content {
    text-align: center;
  }

  .cta-content h2 {
    color: white;
    margin-bottom: 1rem;
  }

  .cta-content > p {
    color: rgba(255,255,255,0.9);
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 2rem;
  }

  .cta-button-primary {
    display: inline-block;
    background: white;
    color: var(--color-primary, #2d6d5f);
    padding: 14px 32px;
    text-decoration: none;
    font-weight: 600;
    border-radius: 25px;
    transition: all 0.2s;
  }

  .cta-button-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }

  .cta-button-secondary {
    display: inline-block;
    background: transparent;
    color: white;
    padding: 14px 32px;
    text-decoration: none;
    font-weight: 600;
    border-radius: 25px;
    border: 2px solid rgba(255,255,255,0.5);
    transition: all 0.2s;
  }

  .cta-button-secondary:hover {
    border-color: white;
    background: rgba(255,255,255,0.1);
  }

  .contact-info {
    color: rgba(255,255,255,0.85);
    font-size: 0.95rem;
  }

  .contact-info p {
    margin: 0.25rem 0;
  }

  .contact-info a {
    color: white;
    text-decoration: none;
  }

  .contact-info a:hover {
    text-decoration: underline;
  }

  /* Common Conditions Section */
  .section-subtitle {
    text-align: center;
    color: #6c757d;
    margin-bottom: 2rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  .conditions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.25rem;
  }

  .condition-card {
    background: white;
    padding: 1.5rem;
    border-radius: 12px;
    border-left: 4px solid var(--color-accent, #3db89f);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  }

  .condition-card h4 {
    color: var(--color-primary, #2d6d5f);
    margin: 0 0 0.5rem;
    font-size: 1.05rem;
  }

  .condition-card p {
    color: #6c757d;
    margin: 0;
    font-size: 0.95rem;
    line-height: 1.6;
  }

  /* Neighborhood Info Section */
  .neighborhood-info h2 {
    color: var(--color-primary, #2d6d5f);
    margin-bottom: 1.5rem;
  }

  .neighborhood-text {
    color: #495057;
    line-height: 1.8;
    font-size: 1.05rem;
  }

  .neighborhood-text p {
    margin-bottom: 1rem;
  }

  .neighborhood-text p:last-child {
    margin-bottom: 0;
  }

  /* FAQ Section */
  .faq-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .faq-item {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    transition: box-shadow 0.2s;
  }

  .faq-item:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  .faq-item[open] {
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
  }

  .faq-question {
    font-weight: 600;
    font-size: 1.05rem;
    color: var(--color-primary, #2d6d5f);
    cursor: pointer;
    list-style: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .faq-question::-webkit-details-marker {
    display: none;
  }

  .faq-question::after {
    content: '+';
    font-size: 1.5rem;
    font-weight: 300;
    color: var(--color-accent, #3db89f);
    transition: transform 0.2s;
  }

  .faq-item[open] .faq-question::after {
    transform: rotate(45deg);
  }

  .faq-answer {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #e9ecef;
    color: #6c757d;
    line-height: 1.7;
  }

  .faq-answer p {
    margin: 0;
  }

  @media (max-width: 768px) {
    .location-hero {
      padding: 3rem 1.5rem;
    }

    .location-hero h1 {
      font-size: 2rem;
    }

    .content-section-white,
    .content-section-gray,
    .content-section-accent,
    .content-section-cta {
      padding: 3rem 1.5rem;
    }

    .location-details {
      grid-template-columns: 1fr;
    }

    .conditions-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
